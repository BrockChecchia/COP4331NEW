{"ast":null,"code":"var _jsxFileName = \"/home/reia/cards/frontend/src/components/RespondPanel.js\";\nimport React, { useState, useEffect } from 'react';\nconst BASE_URL = 'http://localhost:5000/';\n\nfunction RespondPanel() {\n  var reasonGiven;\n  const [approvalValue, setAppVal] = useState('');\n  useEffect(() => {\n    setAppVal(\"true\");\n  }, []);\n\n  const doResponse = async event => {\n    event.preventDefault();\n\n    var _tei = localStorage.getItem('trip_edit_data');\n\n    var tei = JSON.parse(_tei);\n    var tID = tei.idToEdit;\n    var uID = tei.uID;\n    var aID = tei.aID; // alert(tID + \" \" + uID + \" \" + aID + \" \" + approvalValue + \" \" + reasonGiven.value);\n\n    if (approvalValue === \"true\") {\n      var js = '{\"_id\":\"' + tID + '\",\"newData\":{' // + '\"userId\":\"' \n      // + uID\n      // + '\",\"adminId\":\"'\n      // + aID\n      + '\"isApproved\":' + approvalValue + ',\"isNew\":' + true + ',\"comments\":\"' + reasonGiven.value + '\"}}'; // alert(js);        \n    } else {\n      var js = '{\"_id\":\"' + tID + '\",\"newData\":{' // + '\"userId\":\"' \n      // + uID\n      // + '\",\"adminId\":\"'\n      // + aID\n      + '\"isApproved\":' + approvalValue + ',\"isNew\":' + false + ',\"comments\":\"' + reasonGiven.value + '\"}}'; // alert(js);\n    }\n\n    try {\n      const response = await fetch(BASE_URL + 'api/editTrip', {\n        method: 'POST',\n        body: js,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      var res = await response.text();\n      document.getElementById(\"RespondPanel\").style.display = \"none\";\n      document.getElementById(\"PendingPanel\").style.display = \"block\";\n      window.location.reload();\n    } catch (e) {\n      alert(e.toString());\n      return;\n    }\n  }; // swap back to pendingPanel\n\n\n  const goToPendingPanel = event => {\n    event.preventDefault();\n    document.getElementById(\"RespondPanel\").style.display = \"none\";\n    document.getElementById(\"PendingPanel\").style.display = \"block\";\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"RespondPanel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: doResponse,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    id: \"inner-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }\n  }, \"Respond to Trip Request\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 70\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 76\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    id: \"resAppLabel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }, \"Accept\", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"radio\",\n    class: \"radio\",\n    id: \"resApprove\",\n    name: \"status\",\n    value: \"true\",\n    checked: approvalValue === \"true\",\n    onClick: () => setAppVal(\"true\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 169\n    }\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    id: \"resDenLabel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }, \"Deny\", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"radio\",\n    class: \"radio\",\n    id: \"resDeny\",\n    name: \"status\",\n    value: \"false\",\n    checked: approvalValue === \"false\",\n    onClick: () => setAppVal(\"false\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 168\n    }\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"resReason\",\n    placeholder: \"Reason\",\n    ref: c => reasonGiven = c,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 103\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    id: \"resSubmit\",\n    class: \"buttons\",\n    onClick: doResponse,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }, \"Send Response\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 113\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 119\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    id: \"resCancel\",\n    class: \"buttons\",\n    onClick: goToPendingPanel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, \" Cancel \"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 114\n    }\n  })));\n}\n\n;\nexport default RespondPanel;","map":{"version":3,"sources":["/home/reia/cards/frontend/src/components/RespondPanel.js"],"names":["React","useState","useEffect","BASE_URL","RespondPanel","reasonGiven","approvalValue","setAppVal","doResponse","event","preventDefault","_tei","localStorage","getItem","tei","JSON","parse","tID","idToEdit","uID","aID","js","value","response","fetch","method","body","headers","res","text","document","getElementById","style","display","window","location","reload","e","alert","toString","goToPendingPanel","c"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\n\nconst BASE_URL = 'http://localhost:5000/';\n\nfunction RespondPanel() {\n\n    var reasonGiven;\n\n    const [approvalValue,setAppVal] = useState('');\n\n    useEffect(() => {\n        setAppVal(\"true\");\n      },[]);\n\n\n    const doResponse = async event => {\n        event.preventDefault();\n\n        var _tei = localStorage.getItem('trip_edit_data');\n        var tei = JSON.parse(_tei);\n        var tID = tei.idToEdit;\n        var uID = tei.uID;\n        var aID = tei.aID;\n\n        // alert(tID + \" \" + uID + \" \" + aID + \" \" + approvalValue + \" \" + reasonGiven.value);\n\n        if (approvalValue === \"true\")\n        {\n            var js = '{\"_id\":\"'\n            + tID\n            + '\",\"newData\":{'\n            // + '\"userId\":\"' \n            // + uID\n            // + '\",\"adminId\":\"'\n            // + aID\n            + '\"isApproved\":'\n            + approvalValue\n            + ',\"isNew\":' + true\n            + ',\"comments\":\"' + reasonGiven.value + '\"}}';\n\n            // alert(js);        \n        }\n\n        else\n        {\n            var js = '{\"_id\":\"'\n            + tID\n            + '\",\"newData\":{'\n            // + '\"userId\":\"' \n            // + uID\n            // + '\",\"adminId\":\"'\n            // + aID\n            + '\"isApproved\":'\n            + approvalValue\n            + ',\"isNew\":' + false\n            + ',\"comments\":\"' + reasonGiven.value + '\"}}';\n\n            // alert(js);\n        }\n\n\n        try {\n            const response = await fetch(BASE_URL + 'api/editTrip',\n                { method: 'POST', body: js, headers: { 'Content-Type': 'application/json' } });\n\n            var res = await response.text();\n\n            document.getElementById(\"RespondPanel\").style.display = \"none\";\n            document.getElementById(\"PendingPanel\").style.display = \"block\";\n\n            window.location.reload();\n        }\n        catch (e) {\n            alert(e.toString());\n            return;\n        }\n    }\n\n    // swap back to pendingPanel\n    const goToPendingPanel = event => {\n        event.preventDefault();\n\n        document.getElementById(\"RespondPanel\").style.display = \"none\";\n        document.getElementById(\"PendingPanel\").style.display = \"block\";\n    }\n\n\n    return (\n        <div id=\"RespondPanel\">\n            <form onSubmit={doResponse}>\n                <span id=\"inner-title\">Respond to Trip Request</span><br /><br />\n                <label id=\"resAppLabel\">\n                    Accept\n                    <input type=\"radio\" class=\"radio\" id=\"resApprove\" name=\"status\" value=\"true\" checked={approvalValue === \"true\"} onClick={() => setAppVal(\"true\")} /><br />\n                </label>\n\n                <label id=\"resDenLabel\">\n                    Deny\n                    <input type=\"radio\" class=\"radio\" id=\"resDeny\" name=\"status\" value=\"false\" checked={approvalValue === \"false\"} onClick={() => setAppVal(\"false\")}/><br />\n                </label>\n                <input type=\"text\" id=\"resReason\" placeholder=\"Reason\" ref={(c) => reasonGiven = c} /><br />\n                <button type=\"button\" id=\"resSubmit\" class=\"buttons\" onClick={doResponse}>Send Response</button><br /><br />\n                <button type=\"button\" id=\"resCancel\" class=\"buttons\" onClick={goToPendingPanel}> Cancel </button><br />\n            </form>\n        </div>\n    );\n};\n\nexport default RespondPanel;"]},"metadata":{},"sourceType":"module"}